<div id="table-wrapper">
    <p-table #table [scrollable]="true" [value]="data.customer.ports" dataKey="port.description" scrollHeight="flex" expandableRows="true" selectionMode="single" sortMode="multiple">
        <ng-template pTemplate="header">
            <tr>
                <th class="center width-4"></th>
                <th>{{ getLabel('headerPort') }}</th>
                <th class="width-4">{{ getLabel('headerAdults') }}</th>
                <th class="width-4">{{ getLabel('headerKids') }}</th>
                <th class="width-4">{{ getLabel('headerFree') }}</th>
                <th class="width-4">{{ getLabel('headerTotalPersons') }}</th>
                <th class="width-4">{{ getLabel('headerTotalPersons') }}<span class="subscript">1</span></th>
                <th class="width-4">{{ getLabel('headerNoShow') }}</th>
                <th class="width-4">+/-</th>
            </tr>
        </ng-template>
        <ng-template let-allPorts let-expanded="expanded" pTemplate="body">
            <tr class="port-total">
                <td class="center width-4"><button [icon]="expanded ? 'fas fa-angle-down' : 'fas fa-angle-right'" [pRowToggler]="allPorts" class="p-button-text p-button-rounded p-button-plain" pButton pRipple></button></td>
                <td>{{ allPorts.port.description }}</td>
                <td class="number width-4">{{ allPorts.adults | replaceZero }}</td>
                <td class="number width-4">{{ allPorts.kids | replaceZero }}</td>
                <td class="number width-4">{{ allPorts.free | replaceZero }}</td>
                <td class="number width-4">{{ allPorts.totalPersons | replaceZero }}</td>
                <td class="number width-4">{{ allPorts.totalPassengers | replaceZero }}</td>
                <td class="number width-4">{{ allPorts.totalNoShow | replaceZero }}</td>
                <td class="center emoji width-4">
                    <span *ngIf="allPorts.totalPersons - allPorts.totalPassengers == 0">{{ getEmoji('ok') }}</span>
                    <span *ngIf="allPorts.totalPersons - allPorts.totalPassengers != 0">{{ getEmoji('warning') }}</span>
                </td>
            </tr>
        </ng-template>
        <ng-template let-port pTemplate="rowexpansion">
            <tr class="group-row no-hover">
                <td colspan="2">
                    <div class="passengers-row">
                        <p-table [value]="port.hasTransferGroup" class="nested-table" dataKey="hasTransferGroup">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th class="width-4"></th>
                                    <th></th>
                                    <th class="width-4">{{ getLabel('headerAdults') }}</th>
                                    <th class="width-4">{{ getLabel('headerKids') }}</th>
                                    <th class="width-4">{{ getLabel('headerFree') }}</th>
                                    <th class="width-4">{{ getLabel('headerTotalPersons') }}</th>
                                    <th class="width-4">{{ getLabel('headerTotalPersons') }}<span class="subscript">1</span></th>
                                    <th class="width-4">{{ getLabel('headerNoShow') }}</th>
                                    <th class="width-4">+/-</th>
                                    <th class="width-7">{{ getLabel('headerHasTransfer') }}</th>
                                </tr>
                            </ng-template>
                            <ng-template let-hasTransfer pTemplate="body">
                                <tr>
                                    <td class="width-4"></td>
                                    <td></td>
                                    <td class="number width-4">{{ hasTransfer.adults | replaceZero }}</td>
                                    <td class="number width-4">{{ hasTransfer.kids | replaceZero }}</td>
                                    <td class="number width-4">{{ hasTransfer.free | replaceZero }}</td>
                                    <td class="number width-4">{{ hasTransfer.totalPersons | replaceZero }}</td>
                                    <td class="number width-4">{{ hasTransfer.totalPassengers | replaceZero }}</td>
                                    <td class="number width-4">{{ hasTransfer.totalNoShow | replaceZero }}</td>
                                    <td class="center emoji width-4">
                                        <span *ngIf="hasTransfer.totalPersons - hasTransfer.totalPassengers == 0">{{ getEmoji('ok') }}</span>
                                        <span *ngIf="hasTransfer.totalPersons - hasTransfer.totalPassengers != 0">{{ getEmoji('warning') }}</span>
                                    </td>
                                    <td [ngClass]="hasTransfer.hasTransfer ? 'has-transfer' : 'no-transfer'" class="center width-7">
                                        <span *ngIf="hasTransfer.hasTransfer">{{ getEmoji('green-circle') }} </span>
                                        <span *ngIf="!hasTransfer.hasTransfer">{{ getEmoji('red-circle') }}</span>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>