<div id="list">

    <div *ngIf="record" id="header">
        <home-button-and-title [feature]="feature" [icon]="icon" [parentUrl]="parentUrl"></home-button-and-title>
    </div>

    <ng-container *ngIf="record">
        <div id="table-wrapper">
            <p-table #table [autoLayout]="false" [scrollable]="true" [value]="record" dataKey="id" scrollHeight="flex" selectionMode="single" sortMode="multiple">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width: 20%; border-top-left-radius: 10px;">{{ getLabel("headerDestination") }}</th>
                        <th style="width: 20%;">{{ getLabel("headerShip") }}</th>
                        <th style="width: 10%;">{{ getLabel("headerTicketNo") }}</th>
                        <th style="width: 10%;">{{ getLabel("headerHasTransfer") }}</th>
                        <th style="width: 5%;">{{ getLabel("headerAdults") }}</th>
                        <th style="width: 5%;">{{ getLabel("headerKids") }}</th>
                        <th style="width: 5%;">{{ getLabel("headerFree") }}</th>
                        <th style="width: 6%;">{{ getLabel("headerTotalPersons") }}</th>
                        <th style="width: 20%; border-top-right-radius: 10px;">{{ getLabel("headerRemarks") }}</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData>
                    <tr>
                        <td colspan="2" class="row-group clickable" (click)="exportSingleCustomer(rowData.date, rowData.customer.id)">
                            <i class="pi pi-file-pdf"></i><span>{{ rowData.customer.description }}</span>
                        </td>
                        <td style="width: 20%;"></td>
                        <td style="width: 10%;"></td>
                        <td style="width: 10%;"></td>
                        <td style="width: 5%;"></td>
                        <td style="width: 5%;"></td>
                        <td style="width: 5%;"></td>
                        <td style="width: 6%;"></td>
                        <td style="width: 20%;"></td>
                    </tr>
                    <tr [pSelectableRow]="rowData.reservations[i]" *ngFor="let x of rowData.reservations, let i = index">
                        <td style="width: 20%;">{{ rowData.reservations[i].destinationDescription }}</td>
                        <td style="width: 20%;">{{ rowData.reservations[i].shipDescription }}</td>
                        <td style="width: 10%;">{{ rowData.reservations[i].ticketNo }}</td>
                        <td style="text-align: center; width: 10%;">
                            <i class="pi" [ngClass]="{'icon-green pi-check': rowData.reservations[i].hasTransfer, 'icon-red pi-times': !rowData.reservations[i].hasTransfer}"></i>
                        </td>
                        <td style="text-align: right; width: 5%;">{{ rowData.reservations[i].adults }}</td>
                        <td style="text-align: right; width: 5%;">{{ rowData.reservations[i].kids }}</td>
                        <td style="text-align: right; width: 5%;">{{ rowData.reservations[i].free }}</td>
                        <td style="text-align: right; width: 6%;">{{ rowData.reservations[i].totalPersons }}</td>
                        <td style="width: 20%;">{{ rowData.reservations[i].remarks }}</td>
                    </tr>
                    <tr>
                        <th colspan="3"></th>
                        <th colspan="5" class="total-header">{{ getLabel("headerTotals") }}</th>
                        <th colspan="1"></th>
                    </tr>
                    <tr class="subtotal" *ngFor="let x of rowData.hasTransferGroup, let i = index">
                        <td style="width: 20%;"></td>
                        <td style="width: 20%;"></td>
                        <td style="width: 20%;"></td>
                        <td style="text-align: center; width: 3rem;">
                            <i class="pi" [ngClass]="{'icon-green pi-check': rowData.hasTransferGroup[i].hasTransfer, 'icon-red pi-times': !rowData.hasTransferGroup[i].hasTransfer}"></i>
                        <td style="text-align: right; width: 3rem;">{{ rowData.hasTransferGroup[i].adults }}</td>
                        <td style="text-align: right; width: 3rem;">{{ rowData.hasTransferGroup[i].kids }}</td>
                        <td style="text-align: right; width: 3rem;">{{ rowData.hasTransferGroup[i].free }}</td>
                        <td style="text-align: right; width: 4rem;">{{ rowData.hasTransferGroup[i].totalPersons }}</td>
                        <td style="width: 10%;"></td>
                    </tr>
                    <tr class="row-group">
                        <td style="width: 10%;"></td>
                        <td style="width: 20%;"></td>
                        <td style="width: 20%;"></td>
                        <td style="width: 3rem;"></td>
                        <td style="text-align: right; width: 3rem;">{{ rowData.hasTransferGroupTotal.adults }}</td>
                        <td style="text-align: right; width: 3rem;">{{ rowData.hasTransferGroupTotal.kids }}</td>
                        <td style="text-align: right; width: 3rem;">{{ rowData.hasTransferGroupTotal.free }}</td>
                        <td style="text-align: right; width: 4rem;">{{ rowData.hasTransferGroupTotal.totalPersons }}</td>
                        <td style="width: 10%;"></td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
        <div id="footer">
            <div @slideFromRight class="button-group">
                <button data-cy="new" mat-flat-button class="primary" (click)="exportAllCustomers()">{{ getLabel("exportAllButton") }}</button>
            </div>
        </div>
    </ng-container>

    <!-- <ng-container *ngIf="records.reservations">
        <div id="image-wrapper">
            <span>{{ getEmoji("no-results") }}</span>
            <h1>{{ getLabel("no-results") }}</h1>
            <button (click)="goBack()" class="primary" data-cy="go-back" id="go-back" mat-flat-button>OK</button>
        </div>
    </ng-container> -->

</div>